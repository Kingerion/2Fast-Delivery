<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#2196f3">
    <title>2Fast Delivery</title>
    
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="shortcut icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">

    <style>
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif; background: #f8f9fa; }
        
        /* LOGO HEADER */
        .app-header {
            background: white; padding: 10px; display: flex; justify-content: center; align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); position: relative; z-index: 20;
        }
        .app-header img { height: 50px; }

        /* MAP */
        #map { height: 35vh; min-height: 250px; width: 100%; background: #e0e0e0; border-radius: 0 0 20px 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        
        .container { padding: 20px; max-width: 600px; margin: -25px auto 0; position: relative; z-index: 10; padding-bottom: 80px; }
        
        /* HEADER */
        .header-row { display: flex; justify-content: space-between; align-items: center; margin: 10px 0 20px; }
        h2 { color: #333; font-size: 22px; font-weight: 800; margin: 0; }
        .reset-btn { background: #ffebee; color: #d32f2f; border: none; padding: 8px 12px; border-radius: 8px; font-weight: bold; font-size: 13px; cursor: pointer; }

        /* CARDS */
        .card { background: white; padding: 15px; border-radius: 16px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .title { color: #1976d2; font-weight: 800; font-size: 13px; text-transform: uppercase; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }
        
        /* INPUTS */
        input, select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px; font-size: 16px; box-sizing: border-box; background: #f9f9f9; margin-bottom: 8px; transition: 0.3s; }
        input:focus { border-color: #2196f3; background: #fff; outline: none; }
        
        /* PRICE BOX */
        .price-box { background: linear-gradient(135deg, #1e88e5, #1565c0); color: white; padding: 20px; border-radius: 16px; text-align: center; margin: 20px 0; box-shadow: 0 5px 15px rgba(21, 101, 192, 0.3); }
        .price-val { font-size: 36px; font-weight: 800; }
        .price-dist { opacity: 0.9; font-size: 14px; margin-top: 5px; }
        
        /* BUTTON */
        #sendBtn { width: 100%; padding: 16px; background: #ff5722; color: white; border: none; border-radius: 12px; font-size: 18px; font-weight: bold; cursor: pointer; box-shadow: 0 4px 10px rgba(255, 87, 34, 0.3); transition: 0.3s; }
        
        /* SHIPDAY IFRAME CONTAINER */
        #shipdayContainer { display: none; margin-top: 30px; animation: fadeIn 0.5s; }
        .iframe-box { border: 2px solid #2196f3; border-radius: 15px; overflow: hidden; background: white; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="app-header">
        <img src="favicon.png" alt="2Fast Delivery Logo">
    </div>

    <div id="map"></div>

    <div class="container">
        <div class="header-row">
            <h2>Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ ÎšÏŒÏƒÏ„Î¿Ï…Ï‚</h2>
            <button class="reset-btn" onclick="resetForm()">ğŸ—‘ï¸ ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚</button>
        </div>

        <div class="card">
            <div class="title">ğŸ“ Î”Î™Î‘Î”Î¡ÎŸÎœÎ— (Î“Î¹Î± Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒ Î¤Î¹Î¼Î®Ï‚)</div>
            <input type="text" id="start" placeholder="Î‘Ï€ÏŒ: ÎŸÎ´ÏŒÏ‚ Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚..." onblur="calc()">
            <input type="text" id="end" placeholder="Î ÏÎ¿Ï‚: ÎŸÎ´ÏŒÏ‚ Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚..." onblur="calc()">
        </div>

        <div class="card">
            <div class="title">ğŸ“¦ Î•Î Î™Î›ÎŸÎ“Î•Î£</div>
            <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">
                <label style="flex:1; font-weight:bold;">ğŸ”„ ÎœÎµ Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î® (x2)</label>
                <input type="checkbox" id="roundTrip" onchange="calc()" style="width: 20px; height: 20px;">
            </div>
        </div>

        <div class="price-box" id="priceBox">
            <div style="font-size: 13px; opacity: 0.8;">Î•ÎšÎ¤Î™ÎœÎ©ÎœÎ•ÎÎŸ ÎšÎŸÎ£Î¤ÎŸÎ£</div>
            <div class="price-val" id="priceDisplay">0.00 â‚¬</div>
            <div class="price-dist" id="distDisplay">-</div>
            <div style="font-size: 12px; margin-top: 10px; color: #e3f2fd;">*Î£Ï…Î¼Ï€Î»Î·ÏÏÏƒÏ„Îµ Ï„Î· Ï†ÏŒÏÎ¼Î± Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰ Î³Î¹Î± Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±</div>
        </div>

        <button id="sendBtn" onclick="showOrderForm()">â¬‡ï¸ Î£Ï…Î½Î­Ï‡ÎµÎ¹Î± ÏƒÏ„Î·Î½ Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±</button>

        <div id="shipdayContainer">
            <h3 style="text-align: center; color: #333;">ğŸ“ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±Ï‚</h3>
            <p style="text-align: center; font-size: 14px; color: #666; margin-bottom: 10px;">Î£Ï…Î¼Ï€Î»Î·ÏÏÏƒÏ„Îµ Ï„Î± ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± ÏƒÎ±Ï‚ ÏƒÏ„Î· Ï†ÏŒÏÎ¼Î±:</p>
            <div class="iframe-box">
                <iframe src="https://www.deliveryorderforms.com/orderWithoutUpfrontPay/cjbvWAYbg0" width="100%" height="900px" style="border:none;"></iframe>
            </div>
        </div>

    </div>

    <script>
        // Î¡Î¥Î˜ÎœÎ™Î£Î•Î™Î£ Î§Î‘Î¡Î¤Î—
        const MAX_KM = 35;
        let map, dirService, dirRenderer, startAuto, endAuto;
        let calculatedPrice = 0;

        function initMap() {
            try {
                map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 13, center: { lat: 37.9429, lng: 23.6470 }, disableDefaultUI: true
                });
                dirService = new google.maps.DirectionsService();
                dirRenderer = new google.maps.DirectionsRenderer({ 
                    map: map, polylineOptions: { strokeColor: "#2196f3", strokeWeight: 5 }
                });
                initAuto();
            } catch (e) { console.error("Map Error:", e); }
        }

        function initAuto() {
            const opts = { componentRestrictions: { country: "gr" }, fields: ["geometry", "name"] };
            startAuto = new google.maps.places.Autocomplete(document.getElementById('start'), opts);
            endAuto = new google.maps.places.Autocomplete(document.getElementById('end'), opts);
            startAuto.bindTo('bounds', map);
            endAuto.bindTo('bounds', map);
            startAuto.addListener("place_changed", calc);
            endAuto.addListener("place_changed", calc);
        }

        function calc() {
            const start = document.getElementById('start').value;
            const end = document.getElementById('end').value;
            
            if (start.length > 3 && end.length > 3) {
                dirService.route({ origin: start, destination: end, travelMode: 'DRIVING' }, (res, status) => {
                    if (status === 'OK') {
                        dirRenderer.setDirections(res);
                        const km = res.routes[0].legs[0].distance.value / 1000;
                        const txt = res.routes[0].legs[0].distance.text;

                        if (km > MAX_KM) {
                            document.getElementById('priceDisplay').innerText = "ğŸš«";
                            document.getElementById('distDisplay').innerText = "Î•ÎºÏ„ÏŒÏ‚ Î ÎµÏÎ¹Î¿Ï‡Î®Ï‚";
                            calculatedPrice = 0;
                            return;
                        }

                        // Î¤Î¥Î ÎŸÎ£ Î¥Î ÎŸÎ›ÎŸÎ“Î™Î£ÎœÎŸÎ¥ Î¤Î™ÎœÎ—Î£
                        let price = 3.00;
                        if (km > 1) {
                            let rem = km - 1;
                            if (rem <= 3) price += rem * 0.50;
                            else {
                                price += 1.50; rem -= 3;
                                let rate = 0.60;
                                while(rem > 0) { price += (rem>=1?1:rem)*rate; rem--; rate+=0.10; }
                            }
                        }
                        if (document.getElementById('roundTrip').checked) price *= 2.0;
                        
                        calculatedPrice = price;
                        document.getElementById('priceDisplay').innerText = price.toFixed(2) + " â‚¬";
                        document.getElementById('distDisplay').innerText = txt + " â€¢ ~" + res.routes[0].legs[0].duration.text;
                    }
                });
            }
        }

        function showOrderForm() {
            if (calculatedPrice === 0) {
                alert("âš ï¸ Î Î±ÏÎ±ÎºÎ±Î»Ï Î²Î¬Î»Ï„Îµ Î´Î¹ÎµÏ…Î¸ÏÎ½ÏƒÎµÎ¹Ï‚ Î³Î¹Î± Î½Î± Î´ÎµÎ¯Ï„Îµ Ï„Î¿ ÎºÏŒÏƒÏ„Î¿Ï‚ Ï€ÏÏÏ„Î±!");
                return;
            }
            
            // Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· Ï„Î·Ï‚ Ï†ÏŒÏÎ¼Î±Ï‚ Shipday
            document.getElementById('shipdayContainer').style.display = 'block';
            document.getElementById('sendBtn').style.display = 'none'; // ÎšÏÏÎ²Î¿Ï…Î¼Îµ Ï„Î¿ ÎºÎ¿Ï…Î¼Ï€Î¯
            
            // ÎšÏÎ»Î¹ÏƒÎ· Ï€ÏÎ¿Ï‚ Ï„Î± ÎºÎ¬Ï„Ï‰ Î³Î¹Î± Î½Î± Ï†Î±Î½ÎµÎ¯ Î· Ï†ÏŒÏÎ¼Î±
            setTimeout(() => {
                document.getElementById('shipdayContainer').scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }

        function resetForm() {
            document.getElementById('start').value = '';
            document.getElementById('end').value = '';
            document.getElementById('roundTrip').checked = false;
            document.getElementById('priceDisplay').innerText = "0.00 â‚¬";
            document.getElementById('distDisplay').innerText = "-";
            calculatedPrice = 0;
            
            // ÎšÏÏÎ²Î¿Ï…Î¼Îµ Ï€Î¬Î»Î¹ Ï„Î· Ï†ÏŒÏÎ¼Î± Shipday
            document.getElementById('shipdayContainer').style.display = 'none';
            document.getElementById('sendBtn').style.display = 'block';
            
            if(dirRenderer) dirRenderer.setDirections({routes: []});
        }
    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAdeWVPf1-3ZObret2Onsjb6_DldLgaQCw&libraries=places&callback=initMap" async defer></script>

</body>
</html>
