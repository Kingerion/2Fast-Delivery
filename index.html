<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#1E293B">
    <title>2Fast Delivery | Online Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±</title>
    <style>
        :root { --primary: #FF5722; --secondary: #1E293B; --bg: #F1F5F9; --card: #FFFFFF; --text: #334155; --border: #E2E8F0; }
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background: var(--bg); color: var(--text); display: flex; flex-direction: column; min-height: 100vh; }
        
        .install-banner { background: var(--primary); color: white; padding: 12px 15px; font-size: 13px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .install-text { flex: 1; line-height: 1.4; }
        .install-close { background: none; border: none; color: white; font-size: 22px; font-weight: bold; cursor: pointer; padding-left: 10px; }
        
        .header { display: flex; justify-content: center; align-items: center; background: var(--secondary); color: white; padding: 15px; font-size: 22px; font-weight: 900; letter-spacing: 1px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); z-index: 10; position: relative; }
        
        /* ÎšÎŸÎ¥ÎœÎ Î™Î‘ ÎšÎ‘Î¤Î© Î‘Î ÎŸ Î¤ÎŸ Î§Î‘Î¡Î¤Î— */
        .action-row { display: flex; justify-content: flex-end; gap: 10px; padding: 15px 20px 5px 20px; }
        .action-btn { display: flex; align-items: center; gap: 6px; padding: 10px 15px; border-radius: 10px; text-decoration: none; font-weight: 700; font-size: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); font-family: inherit; }
        .btn-profile { background: var(--card); color: var(--secondary); border: 1.5px solid var(--border); }
        .btn-support { background: #25D366; color: white; border: none; cursor: pointer; }
        
        /* Î¤ÎŸ ÎœÎ™ÎšÎ¡ÎŸ ÎœÎ•ÎÎŸÎ¥ Î¥Î ÎŸÎ£Î¤Î—Î¡Î™ÎÎ—Î£ (Î“Î™Î‘ WHATSAPP/EMAIL) */
        .support-menu { display: none; position: absolute; top: 100%; right: 0; margin-top: 8px; background: var(--card); border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.15); border: 1px solid var(--border); z-index: 100; min-width: 180px; overflow: hidden; text-align: left; }
        .support-menu.active { display: flex; flex-direction: column; }
        .support-item { padding: 12px 15px; text-decoration: none; color: var(--text); font-weight: 700; font-size: 13px; border-bottom: 1px solid var(--border); }
        .support-item:last-child { border-bottom: none; }

        .container { flex: 1; padding: 0 20px 30px 20px; max-width: 600px; margin: 0 auto; width: 100%; box-sizing: border-box; }
        .card { background: var(--card); padding: 22px; border-radius: 16px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.03); border: 1px solid rgba(0,0,0,0.02); }
        .title { color: var(--secondary); font-weight: 800; font-size: 13px; text-transform: uppercase; margin-bottom: 18px; display: flex; align-items: center; border-bottom: 2px solid var(--border); padding-bottom: 10px; }
        .title span.req { color: red; font-size: 16px; margin-left: 5px; }
        
        .input-group { margin-bottom: 16px; }
        .flex-row { display: flex; gap: 12px; margin-bottom: 16px; }
        .flex-row > * { flex: 1; }
        input, select, textarea { width: 100%; padding: 14px; border: 2px solid var(--border); border-radius: 10px; font-size: 15px; box-sizing: border-box; background: #F8FAFC; transition: 0.3s; color: var(--text); font-family: inherit; }
        input:focus, select:focus, textarea:focus { border-color: var(--primary); background: #fff; outline: none; }
        
        .price-box { background: var(--secondary); color: white; text-align: center; padding: 20px; border-radius: 12px; margin-top: 20px; box-shadow: 0 4px 15px rgba(30,41,59,0.2); }
        .price-amount { font-size: 36px; font-weight: 900; color: white; margin: 5px 0; }
        .price-details { font-size: 13px; color: #94A3B8; }
        
        .btn-submit { width: 100%; padding: 18px; background: var(--primary); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 800; cursor: pointer; transition: 0.2s; text-transform: uppercase; letter-spacing: 0.5px; margin-top: 10px; box-shadow: 0 4px 15px rgba(255,87,34,0.3); }
        .btn-submit:active { transform: scale(0.98); }
        .btn-submit:disabled { background: #cbd5e1; box-shadow: none; cursor: not-allowed; }

        /* FOOTER Î£Î¤ÎŸ Î¤Î•Î›ÎŸÎ£ Î¤Î—Î£ Î£Î•Î›Î™Î”Î‘Î£ */
        .footer { background: var(--secondary); color: white; padding: 30px 20px; margin-top: auto; border-top-left-radius: 20px; border-top-right-radius: 20px; }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; max-width: 800px; margin: 0 auto; }
        .footer-col h4 { color: var(--primary); font-size: 14px; text-transform: uppercase; margin-bottom: 12px; font-weight: 800; letter-spacing: 0.5px; }
        .footer-col p, .footer-col ul { font-size: 13px; color: #cbd5e1; line-height: 1.6; margin: 0; padding: 0; list-style: none; }
        .footer-col ul li { margin-bottom: 8px; display: flex; align-items: flex-start; gap: 6px; }
    </style>
</head>
<body>
    <div class="install-banner" id="installBanner" style="display: none;">
        <div class="install-text">
            <strong>ğŸ“² Î•Î³ÎºÎ±Ï„Î±ÏƒÏ„Î®ÏƒÏ„Îµ Ï„Î·Î½ ÎµÏ†Î±ÏÎ¼Î¿Î³Î® Î¼Î±Ï‚!</strong><br>
            Î Î±Ï„Î®ÏƒÏ„Îµ Ï„Î¹Ï‚ ÏÏ…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ (â‹®) ÎºÎ±Î¹ ÎµÏ€Î¹Î»Î­Î¾Ï„Îµ <b>"Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÏƒÏ„Î·Î½ Î‘ÏÏ‡Î¹ÎºÎ® ÎŸÎ¸ÏŒÎ½Î·"</b>.
        </div>
        <button class="install-close" onclick="document.getElementById('installBanner').style.display='none'">Ã—</button>
    </div>

    <header class="header">ğŸš€ 2FAST DELIVERY</header>
    <div id="map" style="height: 40vh; width: 100%; position: relative;"></div>

    <div class="action-row">
        <div style="position: relative;">
            <button onclick="document.getElementById('supportMenu').classList.toggle('active')" class="action-btn btn-support">
                ğŸ§ Î¥Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î·
            </button>
            <div class="support-menu" id="supportMenu">
                <a href="https://wa.me/306934021792" class="support-item" target="_blank">ğŸŸ¢ WhatsApp Support</a>
                <a href="mailto:2fastdelivery1@gmail.com" class="support-item" style="color: #3b82f6;">âœ‰ï¸ Email Support</a>
            </div>
        </div>
        <a href="profile.html" class="action-btn btn-profile">
            ğŸ‘¤ Î ÏÎ¿Ï†Î¯Î»
        </a>
    </div>

    <div class="container">
        <div class="card" style="margin-top: -10px; position: relative; z-index: 10;">
            <div class="title">ğŸ“ Î£Î·Î¼ÎµÎ¯Î± Î”Î¹Î±Î´ÏÎ¿Î¼Î®Ï‚ <span class="req">*</span></div>
            <div class="input-group">
                <input type="text" id="start" placeholder="Î‘Ï€ÏŒ: ÎŸÎ´ÏŒÏ‚ Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚, Î ÎµÏÎ¹Î¿Ï‡Î®" required>
            </div>
            <div class="input-group" style="margin-bottom: 0;">
                <input type="text" id="end" placeholder="Î ÏÎ¿Ï‚: ÎŸÎ´ÏŒÏ‚ Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚, Î ÎµÏÎ¹Î¿Ï‡Î®" required>
            </div>
            
            <div class="price-box">
                <div style="font-size: 12px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; color: #cbd5e1;">ÎšÎ¿ÏƒÏ„Î¿Ï‚ Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î·Ï‚</div>
                <div class="price-amount" id="price">0.00 â‚¬</div>
                <div class="price-details" id="distance">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î´Î¹ÎµÏ…Î¸ÏÎ½ÏƒÎµÎ¹Ï‚ ÏƒÏ„Î¿ Ï‡Î¬ÏÏ„Î·</div>
            </div>
        </div>

        <div class="card">
            <div class="title">ğŸ“¦ Î£Î¤ÎŸÎ™Î§Î•Î™Î‘ Î Î‘Î¡Î‘Î›Î‘Î’Î—Î£ <span class="req">*</span></div>
            <div class="input-group">
                <input type="text" id="pickupName" placeholder="ÎŸÎ½Î¿Î¼Î±Ï„ÎµÏ€ÏÎ½Ï…Î¼Î¿ / Î•Ï„Î±Î¹ÏÎµÎ¯Î± (Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î­Î±Ï‚)" required>
            </div>
            <div class="flex-row">
                <input type="tel" id="pickupPhone" placeholder="Î¤Î·Î»Î­Ï†Ï‰Î½Î¿ Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î­Î±" required>
                <input type="text" id="pickupTime" placeholder="ÎÏÎ± (Ï€.Ï‡. 14:30) - Î ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ">
            </div>
        </div>

        <div class="card">
            <div class="title">ğŸ  Î£Î¤ÎŸÎ™Î§Î•Î™Î‘ Î Î‘Î¡Î‘Î”ÎŸÎ£Î—Î£ <span class="req">*</span></div>
            <div class="input-group">
                <input type="text" id="deliveryName" placeholder="ÎŸÎ½Î¿Î¼Î±Ï„ÎµÏ€ÏÎ½Ï…Î¼Î¿ Î Î±ÏÎ±Î»Î®Ï€Ï„Î·" required>
            </div>
            <div class="input-group">
                <input type="tel" id="deliveryPhone" placeholder="Î¤Î·Î»Î­Ï†Ï‰Î½Î¿ Î Î±ÏÎ±Î»Î®Ï€Ï„Î·" required>
            </div>
            <div class="flex-row">
                <input type="text" id="deliveryDate" placeholder="Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± - Î ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ" onfocus="(this.type='date')" onblur="(this.type='text')">
                <input type="text" id="deliveryTime" placeholder="ÎÏÎ± (Ï€.Ï‡. 15:00) - Î ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ">
            </div>
            
            <div class="input-group" style="margin-top: 15px;">
                <label style="font-size: 12px; font-weight: bold; color: var(--secondary); margin-bottom: 5px; display: block;">Î£Î§ÎŸÎ›Î™Î‘ Î Î‘Î¡Î‘Î”ÎŸÎ£Î—Î£ <span class="req">*</span></label>
                <textarea id="deliveryNote" rows="3" required style="font-family: inherit; white-space: pre-wrap;">ÎŒÏÎ¿Ï†Î¿Ï‚ : 
ÎšÎ¿Ï…Î´Î¿ÏÎ½Î¹ : </textarea>
            </div>

            <div class="input-group" style="margin-top: 20px;">
                <label style="font-size: 12px; font-weight: bold; color: var(--secondary); margin-bottom: 5px; display: block;">Î¤Î¡ÎŸÎ ÎŸÎ£ Î Î›Î—Î¡Î©ÎœÎ—Î£ <span class="req">*</span></label>
                <select id="paymentMethod" required style="font-weight: 500;">
                    <option value="" disabled selected>-- Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¤ÏÏŒÏ€Î¿ Î Î»Î·ÏÏ‰Î¼Î®Ï‚ --</option>
                    <option value="ÎœÎµÏ„ÏÎ·Ï„Î¬">ğŸ’µ Î Î»Î·ÏÏ‰Î¼Î®: ÎœÎµÏ„ÏÎ·Ï„Î¬</option>
                    <option value="ÎšÎ¬ÏÏ„Î± (POS)">ğŸ’³ Î Î»Î·ÏÏ‰Î¼Î®: ÎšÎ¬ÏÏ„Î± (POS)</option>
                </select>
            </div>
        </div>

        <button class="btn-submit" id="sendBtn" onclick="submitOrder()">ÎŸÎ›ÎŸÎšÎ›Î—Î¡Î©Î£Î— Î Î‘Î¡Î‘Î“Î“Î•Î›Î™Î‘Î£</button>
    </div>

    <footer class="footer">
        <div class="footer-grid">
            <div class="footer-col">
                <h4>Î£Î§Î•Î¤Î™ÎšÎ‘ ÎœÎ• Î•ÎœÎ‘Î£</h4>
                <p>Î— <strong>2Fast Delivery</strong> ÎµÎ¯Î½Î±Î¹ Î· ÏƒÏÎ³Ï‡ÏÎ¿Î½Î· Î»ÏÏƒÎ· ÏƒÏ„Î¹Ï‚ Ï„Î±Ï‡Ï…Î¼ÎµÏ„Î±Ï†Î¿ÏÎ­Ï‚. Î Î­ÏÎ± Î±Ï€ÏŒ Î±Ï€Î»Î¬ Î´Î­Î¼Î±Ï„Î±, Î±Î½Î±Î»Î±Î¼Î²Î¬Î½Î¿Ï…Î¼Îµ Î½Î± ÏƒÎ±Ï‚ Ï†Î­ÏÎ¿Ï…Î¼Îµ ÏŒ,Ï„Î¹ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏƒÏ„Îµ: Î±Ï€ÏŒ <strong>Ï†Î¬ÏÎ¼Î±ÎºÎ±</strong> ÎºÎ±Î¹ <strong>ÎµÎ¯Î´Î· Ï€ÎµÏÎ¹Ï€Ï„Î­ÏÎ¿Ï…</strong>, Î¼Î­Ï‡ÏÎ¹ ÎµÎ¾Ï…Ï€Î·ÏÎ­Ï„Î·ÏƒÎ· ÎµÏ€Î¹Ï‡ÎµÎ¹ÏÎ®ÏƒÎµÏ‰Î½.</p>
            </div>
            <div class="footer-col">
                <h4>Î¤Î™ Î Î¡ÎŸÎ£Î¦Î•Î¡ÎŸÎ¥ÎœÎ•</h4>
                <ul>
                    <li>ğŸš€ Î†Î¼ÎµÏƒÎ· Ï€Î±ÏÎ±Î»Î±Î²Î® ÎºÎ±Î¹ Ï€Î±ÏÎ¬Î´Î¿ÏƒÎ·</li>
                    <li>ğŸ’Š Î˜ÎµÎ»Î®Î¼Î±Ï„Î± Î¦Î±ÏÎ¼Î±ÎºÎµÎ¯Î¿Ï… & Î ÎµÏÎ¹Ï€Ï„Î­ÏÎ¿Ï…</li>
                    <li>ğŸ›ï¸ Î•Î¾Ï…Ï€Î·ÏÎ­Ï„Î·ÏƒÎ· ÎµÏ€Î¹Ï‡ÎµÎ¹ÏÎ®ÏƒÎµÏ‰Î½ & Î¹Î´Î¹Ï‰Ï„ÏÎ½</li>
                    <li>ğŸ§ Î–Ï‰Î½Ï„Î±Î½Î® Ï…Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î· Ï€ÎµÎ»Î±Ï„ÏÎ½</li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>Î•Î Î™ÎšÎŸÎ™ÎÎ©ÎÎ™Î‘</h4>
                <ul>
                    <li>ğŸ“ Î¤Î·Î»Î­Ï†Ï‰Î½Î¿: 6934021792</li>
                    <li>âœ‰ï¸ Email: 2fastdelivery1@gmail.com</li>
                    <li>ğŸ•’ Î©ÏÎ¬ÏÎ¹Î¿: Î”ÎµÏ…Ï„Î­ÏÎ± - Î£Î¬Î²Î²Î±Ï„Î¿</li>
                </ul>
            </div>
        </div>
    </footer>

    <script>
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        if (isIOS && !window.navigator.standalone) { document.getElementById('installBanner').style.display = 'flex'; }

        // ÎšÎ»ÎµÎ¯Î½ÎµÎ¹ Ï„Î¿ Î¼ÎµÎ½Î¿Ï Ï…Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î·Ï‚ Î±Î½ Ï€Î±Ï„Î®ÏƒÎµÎ¹Ï‚ Î±Î»Î»Î¿Ï ÏƒÏ„Î·Î½ Î¿Î¸ÏŒÎ½Î·
        document.addEventListener('click', function(event) {
            var menu = document.getElementById('supportMenu');
            var btn = document.querySelector('.btn-support');
            if (menu && btn && !btn.contains(event.target) && !menu.contains(event.target)) {
                menu.classList.remove('active');
            }
        });

        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwc8G9tP4w-R58r5_O2zR9N9bX4K4dF1l_Z5uX3P_l2zS2QYfXp0X7K8D5J2Wk/exec';
        let map, directionsService, directionsRenderer;
        let startAutocomplete, endAutocomplete;
        let calculatedPrice = 0;

        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), { center: {lat: 37.9429, lng: 23.6439}, zoom: 12, disableDefaultUI: true, styles: [{"featureType":"poi","elementType":"labels","stylers":[{"visibility":"off"}]}] });
            directionsService = new google.maps.DirectionsService();
            directionsRenderer = new google.maps.DirectionsRenderer({ map: map, polylineOptions: { strokeColor: '#FF5722', strokeOpacity: 0.8, strokeWeight: 5 } });

            startAutocomplete = new google.maps.places.Autocomplete(document.getElementById('start'));
            endAutocomplete = new google.maps.places.Autocomplete(document.getElementById('end'));

            startAutocomplete.addListener('place_changed', calc);
            endAutocomplete.addListener('place_changed', calc);
        }

        function calc() {
            const start = document.getElementById('start').value;
            const end = document.getElementById('end').value;
            if (!start || !end) return;

            directionsService.route({ origin: start, destination: end, travelMode: 'DRIVING' }, (response, status) => {
                if (status === 'OK') {
                    directionsRenderer.setDirections(response);
                    const distKm = response.routes[0].legs[0].distance.value / 1000;
                    const mins = response.routes[0].legs[0].duration.value / 60;
                    
                    let p = 3.50; 
                    if (distKm > 2) p += (distKm - 2) * 0.70;
                    calculatedPrice = p.toFixed(2);
                    
                    document.getElementById('price').innerText = calculatedPrice + ' â‚¬';
                    document.getElementById('distance').innerText = distKm.toFixed(1) + ' Ï‡Î»Î¼ Î±Ï€ÏŒÏƒÏ„Î±ÏƒÎ· - ~' + Math.round(mins) + ' Î»ÎµÏ€Ï„Î¬';
                }
            });
        }

        function submitOrder() {
            if (calculatedPrice == 0) return alert("ğŸ“ Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÏ€Î¹Î»Î­Î¾Ï„Îµ Î´Î¹ÎµÏ…Î¸ÏÎ½ÏƒÎµÎ¹Ï‚ Ï€Î±ÏÎ±Î»Î±Î²Î®Ï‚ ÎºÎ±Î¹ Ï€Î±ÏÎ¬Î´Î¿ÏƒÎ·Ï‚!");
            
            if (!document.getElementById('pickupName').value.trim() || !document.getElementById('pickupPhone').value.trim()) {
                return alert("âš ï¸ Î£Ï…Î¼Ï€Î»Î·ÏÏÏƒÏ„Îµ ÎŒÎ½Î¿Î¼Î± ÎºÎ±Î¹ Î¤Î·Î»Î­Ï†Ï‰Î½Î¿ Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î­Î±!");
            }
            if (!document.getElementById('deliveryName').value.trim() || !document.getElementById('deliveryPhone').value.trim()) {
                return alert("âš ï¸ Î£Ï…Î¼Ï€Î»Î·ÏÏÏƒÏ„Îµ ÎŒÎ½Î¿Î¼Î± ÎºÎ±Î¹ Î¤Î·Î»Î­Ï†Ï‰Î½Î¿ Î Î±ÏÎ±Î»Î®Ï€Ï„Î·!");
            }

            const payment = document.getElementById('paymentMethod').value;
            if (!payment) return alert("âš ï¸ Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÏ€Î¹Î»Î­Î¾Ï„Îµ Î¤ÏÏŒÏ€Î¿ Î Î»Î·ÏÏ‰Î¼Î®Ï‚!");

            const rawNotes = document.getElementById('deliveryNote').value.trim();
            if (rawNotes.length < 25) { 
                alert("âš ï¸ Î Î±ÏÎ±ÎºÎ±Î»Ï ÏƒÏ…Î¼Ï€Î»Î·ÏÏÏƒÏ„Îµ Ï„Î¿Î½ ÎŒÏÎ¿Ï†Î¿ ÎºÎ±Î¹ Ï„Î¿ ÎšÎ¿Ï…Î´Î¿ÏÎ½Î¹ ÏƒÏ„Î± Î£Ï‡ÏŒÎ»Î¹Î±!");
                document.getElementById('deliveryNote').focus();
                return;
            }

            const btn = document.getElementById('sendBtn');
            btn.innerText = "Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®... â³";
            btn.disabled = true;

            const combinedNotes = "Î Î›Î—Î¡Î©ÎœÎ—: " + payment + " | Î£Î§ÎŸÎ›Î™Î‘: " + rawNotes;

            const payload = {
                startAddr: document.getElementById('start').value, endAddr: document.getElementById('end').value,
                price: calculatedPrice, pickupName: document.getElementById('pickupName').value, pickupPhone: document.getElementById('pickupPhone').value,
                pickupTime: document.getElementById('pickupTime').value, deliveryName: document.getElementById('deliveryName').value,
                deliveryPhone: document.getElementById('deliveryPhone').value, deliveryDate: document.getElementById('deliveryDate').value,
                deliveryTime: document.getElementById('deliveryTime').value, notes: combinedNotes
            };

            if (window.saveDeliveryData) window.saveDeliveryData(payload.deliveryName, payload.deliveryPhone, payload.endAddr, rawNotes, calculatedPrice);

            fetch(SCRIPT_URL, { method: 'POST', body: JSON.stringify(payload) })
            .then(response => response.text()).then(data => { alert("âœ… Î— Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î± ÎºÎ±Ï„Î±Ï‡Ï‰ÏÎ®Î¸Î·ÎºÎµ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚!"); window.location.reload(); });
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAdeWVPf1-3ZObret2Onsjb6_DldLgaQCw&libraries=places&callback=initMap" async defer></script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const app = initializeApp({ apiKey: "AIzaSyDHmXVo-2kFvCFN3Q8U_MvJl_By_b6hs2w", authDomain: "fast-delivery-8227d.firebaseapp.com", projectId: "fast-delivery-8227d", storageBucket: "fast-delivery-8227d.firebasestorage.app" });
        const auth = getAuth(app); const db = getFirestore(app);

        onAuthStateChanged(auth, async (user) => {
            if (!user) { window.location.replace("login.html"); } else {
                if (user.displayName && !document.getElementById('deliveryName').value) document.getElementById('deliveryName').value = user.displayName;
                const docSnap = await getDoc(doc(db, "users", user.uid));
                if (docSnap.exists()) {
                    const data = docSnap.data();
                    if (data.isBlocked) { alert("â›” ÎŸ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒÏ‚ ÏƒÎ±Ï‚ Î­Ï‡ÎµÎ¹ Î±Î½Î±ÏƒÏ„Î±Î»ÎµÎ¯. Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î®ÏƒÏ„Îµ Î¼Îµ Ï„Î·Î½ Ï…Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î·."); signOut(auth).then(() => { window.location.replace("login.html"); }); return; }
                    if (data.name) document.getElementById('deliveryName').value = data.name;
                    if (data.phone) document.getElementById('deliveryPhone').value = data.phone;
                    if (data.address) { document.getElementById('end').value = data.address; setTimeout(calc, 500); }
                    if (data.notes) document.getElementById('deliveryNote').value = data.notes;
                }
            }
        });

        window.saveDeliveryData = async function(name, phone, address, notes, price) {
            if (auth.currentUser) {
                const uid = auth.currentUser.uid;
                await setDoc(doc(db, "users", uid), { name: name, phone: phone, address: address, notes: notes, email: auth.currentUser.email }, { merge: true });
                if (price) { try { await addDoc(collection(db, "users", uid, "orders"), { price: price + " â‚¬", destination: address, timestamp: new Date() }); } catch (e) { console.log(e); } }
            }
        };
    </script>

<script type="text/javascript">window.$crisp=[];window.CRISP_WEBSITE_ID="67431364-9c28-4ce0-8c7b-7c0df05f0313";(function(){d=document;s=d.createElement("script");s.src="https://client.crisp.chat/l.js";s.async=1;d.getElementsByTagName("head")[0].appendChild(s);})();</script>

</body>
</html>